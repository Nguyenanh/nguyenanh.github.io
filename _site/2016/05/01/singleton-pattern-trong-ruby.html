<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Singleton - Design Pattern trong Ruby &#8211; NguyenAnh Dev Blog</title>
<meta name="description" content="Mẫu thiết kế Singleton đảm bảo rằng một lớp chỉ có một thể hiện (instance) duy nhất. Do thể hiện này có tiềm năng sử dụng trong suốt chương trình, nên mẫu thiết kế Singleton cũng cung cấp một điểm truy cập toàn cục đến nó.">
<meta name="keywords" content="singleton, ruby, design-pattern">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Singleton - Design Pattern trong Ruby">
<meta name="twitter:description" content="Mẫu thiết kế Singleton đảm bảo rằng một lớp chỉ có một thể hiện (instance) duy nhất. Do thể hiện này có tiềm năng sử dụng trong suốt chương trình, nên mẫu thiết kế Singleton cũng cung cấp một điểm truy cập toàn cục đến nó.">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Singleton - Design Pattern trong Ruby">
<meta property="og:description" content="Mẫu thiết kế Singleton đảm bảo rằng một lớp chỉ có một thể hiện (instance) duy nhất. Do thể hiện này có tiềm năng sử dụng trong suốt chương trình, nên mẫu thiết kế Singleton cũng cung cấp một điểm truy cập toàn cục đến nó.">
<meta property="og:url" content="/2016/05/01/singleton-pattern-trong-ruby">
<meta property="og:site_name" content="NguyenAnh Dev Blog">

<meta property="og:image" content="/images/default-thumb.png">






<link rel="canonical" href="/2016/05/01/singleton-pattern-trong-ruby">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="NguyenAnh Dev Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">NguyenAnh Dev Blog</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav id="site-nav" class="nav">
		    <ul>
		        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				    <li><a href="/posts/" >All Post</a></li>
				
				    
				    <li><a href="/theme-setup/" >Theme Setup</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->




<div id="main" role="main">
  <div class="article-author-side">
    

<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/bio-photo.jpeg" class="bio-photo" alt="Nguyen Anh bio photo">


  <h3 itemprop="name">Nguyen Anh</h3>
  <p>A VietNam web developer</p>
  <a href="mailto:cauut2117610@gmail.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
  
  <a href="http://facebook.com/anh.nguyen21176" class="author-social" target="_blank"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a>
  
  
  
  
  
  <a href="http://github.com/Nguyenanh" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  
  
  
  
  
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/2016/05/01/singleton-pattern-trong-ruby" rel="bookmark" title="Singleton - Design Pattern trong Ruby">Singleton - Design Pattern trong Ruby</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <h3 id="pattern-singleton-l-g">Pattern Singleton là gì?</h3>

<p>Mẫu thiết kế Singleton đảm bảo rằng một lớp chỉ có một thể hiện (instance) duy nhất. Do thể hiện này có tiềm năng sử dụng trong suốt chương trình, nên mẫu thiết kế Singleton cũng cung cấp một điểm truy cập toàn cục đến nó.</p>

<h3 id="pattern-singleton-c-s-dng-trong-trng-hp-no">Pattern Singleton được sử dụng trong trường hợp nào?</h3>

<p>Khi bạn tạo ra một class mà bạn chỉ muốn chỉ có duy nhất một thực thể là thể hiện của class đó và bạn có thể truy cập đến nó ở bất kỳ nơi đâu khi bạn muốn. Ví dụ:</p>

<ul>
  <li>Làm việc với log file.</li>
  <li>Config cho toàn bộ dự án.</li>
  <li>Kết nối với Database.</li>
  <li>…</li>
</ul>

<h3 id="cch-ci-t">Cách cài đặt.</h3>

<p>``` ruby</p>

<h1 id="singletonsingletonsetuprb">singleton/singleton_setup.rb</h1>
<p>class Database
  attr_accessor :connecting</p>

<p>@@instance = Database.new</p>

<p>def self.instance
    @@instance
  end</p>

<p>private_class_method :new
end
```</p>

<p>``` ruby</p>

<h1 id="irb">irb</h1>
<p>2.2.3 :001 &gt; load ‘singleton/singleton_setup.rb’
 =&gt; true 
2.2.3 :002 &gt; Database.instance.connecting = ‘mysql’
 =&gt; “mysql” 
2.2.3 :003 &gt; first = Database.instance
 =&gt; #&lt;Database:0x007feed305a680 @connecting=”mysql”&gt; 
2.2.3 :004 &gt; first.connecting = ‘mongodb’
 =&gt; “mongodb” 
2.2.3 :005 &gt; Database.instance.connecting
 =&gt; “mongodb” 
2.2.3 :006 &gt; 
```
Qua việc chạy trên cho thấy chỉ một instance được tao ra thông qua việc gọi class method instance và được sử dụng global.</p>

<h3 id="s-dng-singleton-module-ca-ruby">Sử dụng Singleton module của Ruby.</h3>

<p>Trong Ruby đã hỗ trợ cho chúng ta Singleton Patttern đó là Singeleton module. Để tối giản công việc trên chúng ta chỉ cần sử dụng nó.</p>

<p>``` ruby</p>

<h1 id="singletonsingletonmoudlerb">singleton/singleton_moudle.rb</h1>
<p>require ‘singleton’</p>

<p>class Database
  include Singleton</p>

<p>attr_accessor :connecting
end</p>

<p>```</p>

<p><code class="highlighter-rouge">ruby
2.2.3 :002 &gt; load 'singleton/singleton_module.rb'
 =&gt; true 
2.2.3 :003 &gt; Database.instance.connecting = 'mysql'
 =&gt; "mysql" 
2.2.3 :004 &gt; second = Database.instance
 =&gt; #&lt;Database:0x007fac3b09f788 @connecting="mysql"&gt; 
2.2.3 :005 &gt; second = Database.instance.connecting = 'postgresql'
 =&gt; "postgresql" 
2.2.3 :006 &gt; Database.instance.connecting
 =&gt; "postgresql" 
2.2.3 :007 &gt; 
</code></p>

<p><a href="https://github.com/Nguyenanh/design-pattern">Source</a></p>


      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/2016/05/01/singleton-pattern-trong-ruby" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/2016/05/01/singleton-pattern-trong-ruby" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/2016/05/01/singleton-pattern-trong-ruby" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Singleton - Design Pattern trong Ruby</strong> was published on <time datetime="2016-05-01T00:00:00-03:00">May 01, 2016</time> and last modified on <time datetime="2016-05-01">May 01, 2016</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/2016/04/13/rails-5-them-loi-canh-bao-khi-quey-du-lieu-lon" title="Thêm lời cảnh báo khi query dữ liêụ lớn trong rails 5">Thêm lời cảnh báo khi query dữ liêụ lớn trong rails 5</a></li>
    
      <li><a href="/2016/04/10/tung-buoc-xay-dung-mot-ruby-gem" title="Từng bước để xây dựng một Ruby Gem">Từng bước để xây dựng một Ruby Gem</a></li>
    
      <li><a href="/2016/03/28/cau-hinh-deploy-du-an-rails-voi-capistrano-unicorn-va-nginx" title="Cấu hình deploy một dự án Rails với capistrano, unicorn và nginx">Cấu hình deploy một dự án Rails với capistrano, unicorn và nginx</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>2016 Nguyen Anh.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


  




</body>
</html>
